{% extends 'base.html' %}

{% block content %}
<div class="row">
  <div class="col s12 m5 l4">
    {% if validlink %}
    <div class="row">
      <h5>Change password</h5>
      <div class="divider"></div>
    </div>
    {% if form.errors %}
      {% for error in form.non_field_errors %}
        <div class='alert-message alert-message-danger'>{{ error }}</div>
      {% endfor %}
    {% endif %}
           
    <div class="row">    
      <form method="post">{% csrf_token %}
        <div class="row">
          {%if form.new_password1.errors%}
            <div class='alert-message alert-message-danger'>{{form.new_password1.errors}}</div>
          {%endif%}   
          <div class="input-field">
           <input id="new_password1" name ="new_password1" type="password">
           <label for="id_new_password1">New Password</label>
          </div>
          {%if form.new_password2.errors%}
            <div class='alert-message alert-message-danger'>{{form.new_password2.errors}}</div>
          {%endif%}   
          <div class="input-field">
           <input id="new_password2" name ="new_password2" type="password">
           <label for="id_new_password2">Password Confirm</label>
          </div>
        </div>
        <button class="btn waves-effect waves-light" type="submit" name="action">Reset</button>
        <div class="section">
          <div class="row">
            <h6>Password Help</h6>
            <p class="help">{{ form.new_password1.help_text|safe }}</p>
            </div>
          </div>      
      </form>
    </div>
  {% else %}
  <div class="row">
    <p>
    The password reset link was invalid, possibly because it has already been used.
    Please request a new password reset.
    </p>
  </div>  
  {% endif %}
  
</div>
{% endblock %}